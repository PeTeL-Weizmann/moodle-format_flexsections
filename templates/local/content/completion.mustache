{{!
This file is part of Moodle - http://moodle.org/

Moodle is free software: you can redistribute it and/or modify
it under the terms of the GNU General Public License as published by
the Free Software Foundation, either version 3 of the License, or
(at your option) any later version.

Moodle is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
GNU General Public License for more details.

You should have received a copy of the GNU General Public License
along with Moodle. If not, see
<http: //www.gnu.org/licenses />.
}}
{{!
@template format_flexsections/local/content/completion

Displays the completion badge for a card

Example context (json):
{
"completion": {
"total": 4,
"completed": 2,
"percentage": 60,
"dashoffset": 40,
"hasprogress": true,
"iscomplete": false,
"showpercentage": true,
"showcount": false
}
}
}}
{{#completion}}

{{#modecircle}}
    <!--Show circle progress-->
    <div class="chart-wrapper px-2 pt-2 pb-1">
        <div class="svg-wrapper">
            <svg width="100%" height="100%" viewBox="0 0 40 40" class="donut">
                <circle class="donut-hole" cx="20" cy="20" r="15.91549430918954" fill="transparent"></circle>
                <circle class="donut-ring" cx="20" cy="20" r="15.91549430918954" fill="transparent" stroke-width="3.5">
                </circle>
                {{#percentage}}
                <circle class="donut-segment " cx="20" cy="20" r="15.91549430918954" fill="transparent" stroke-width="3.5"
                    stroke-dasharray="{{percentage}} {{dashoffset}}" stroke-dashoffset="25" stroke-linecap="round"></circle>
                {{/percentage}}
            </svg>
        </div>
        <div class="text text-center text-primary">
            {{#showpercentage}}
                {{#str}} section:completion:percentage, format_flexsections, { "percentage": {{#quote}}{{percentage}}{{/quote}} } {{/str}}
            {{/showpercentage}}
            {{#showcount}}
                {{#str}} section:completion:count, format_flexsections, { "completed": {{#quote}}{{completed}}{{/quote}}, "total": {{#quote}}{{total}}{{/quote}} } {{/str}}
            {{/showcount}}
        </div>
    </div>
{{/modecircle}}

{{#modeline}}
    <!--Show line progress-->
    <div class="progress-wrapper p-2">
        <div class="progress mb-2">
            <div class="progress-bar bg-linkhover" role="progressbar" style="width: {{percentage}}%"
                aria-valuenow="{{percentage}}" aria-valuemin="0" aria-valuemax="100">
            </div>
        </div>
        <p class="text-primary mb-0">
            {{#showpercentage}}
                {{#str}} section:completion:percentage, format_flexsections, { "percentage": {{#quote}}{{percentage}}{{/quote}} } {{/str}}
            {{/showpercentage}}
            {{#showcount}}
                {{#str}} section:completion:count, format_flexsections, { "completed": {{#quote}}{{completed}}{{/quote}}, "total": {{#quote}}{{total}}{{/quote}} } {{/str}}
            {{/showcount}}
        </p>
    </div>
{{/modeline}}

{{/completion}}