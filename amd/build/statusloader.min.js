/**
 * Javascript for lazy load of statuses.
 *
 * @package
 * @copyright  2020 Devlion <info@devlion.co>
 * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
 */
define("format_flexsections/statusloader",["jquery","core/ajax","local_petel/inview","core/notification"],(function($,Ajax,inView,Notification){var courseid=null;return{inview:function(){let stack=[];inView(".inviewgrade").on("enter",(function(e){if(!$(e).hasClass("inview-done")){$(e).addClass("inview-done");let cmid=$(e).attr("data-cmid");courseid=$(e).attr("data-courseid"),stack.push(cmid)}})),setInterval((function(){if(stack.length>0){!function(cmids){courseid&&Ajax.call([{methodname:"format_flexsections_get_activity_grade_status",args:{cmids:cmids,courseid:courseid},done:function(resp){JSON.parse(resp).result.forEach((function(item){$("#activity-row-grade-"+item.cmid).html(item.gradestatus),$("#activity-oer-version-"+item.cmid).html(item.oerversion)}))},fail:Notification.exception}])}(JSON.stringify(stack)),stack=[]}}),500)}}}));

//# sourceMappingURL=statusloader.min.js.map