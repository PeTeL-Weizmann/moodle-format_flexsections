/**
 * Javascript for collapse button.
 *
 * @package
 * @copyright  2020 Devlion <info@devlion.co>
 * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
 */
define("format_flexsections/collapsebutton",["jquery","core/str"],(function($,Str){const collapseAction=type=>{$(".course-section").each((function(){let number=$(this).data("number");if(number>0){let id="#collapssesection"+number,status=$(id).attr("aria-expanded");("open"===type&&"false"===status||"close"===type&&"true"===status)&&$(id).click()}}))},getHashNumber=()=>{let queryString=window.location,hash=new URLSearchParams(queryString).get("hash");return hash.length>0&&hash.match(/\d+/)[0]},openHash=()=>{let number=getHashNumber();if(!1!==number){let id="#collapssesection"+number,status=$(id).attr("aria-expanded");$(".course-section").each((function(){let id2="#collapssesection"+$(this).data("number"),status2=$(id2).attr("aria-expanded");id!==id2&&"true"===status2&&$(id2).click(),id===id2&&"false"===status&&$(id2).click()}))}};return{init:function(){setTimeout((function(){!1!==getHashNumber()?openHash():collapseAction("open")}),700),window.addEventListener("hashchange",(function(){openHash()})),Str.get_strings([{key:"collapsebuttonopen",component:"format_flexsections"},{key:"collapsebuttonclose",component:"format_flexsections"}]).done((function(strings){$("#collapse_button").on("click",(function(){switch($(this).data("action")){case"close":$(this).data("action","open").text(strings[1]),collapseAction("open");break;case"open":$(this).data("action","close").text(strings[0]),collapseAction("close");break;default:$(this).data("action","close").text(strings[0])}}))}))}}}));

//# sourceMappingURL=collapsebutton.min.js.map