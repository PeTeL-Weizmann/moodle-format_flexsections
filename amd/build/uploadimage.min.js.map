{"version":3,"file":"uploadimage.min.js","sources":["../src/uploadimage.js"],"sourcesContent":["define(['jquery',\n        'core/ajax',\n        'core/str',\n        'core/modal_factory',\n        'core/modal_events',\n        'core/templates',\n        'core/notification',\n        'core/fragment'],\n    function($, Ajax, Str, ModalFactory, ModalEvents, Templates, Notification, Fragment) {\n        return {\n            course: function() {\n                $(document).on('click', '#uploadcourseimage', (e) => {\n                    let courseid = $(e.target).data('courseid');\n                    let coursecontextid = $(e.target).data('contextid');\n\n                    const getBody = function() {\n                        var params = {courseid: courseid, type: 'course'};\n                        return Fragment.loadFragment('format_flexsections', 'upload_image', coursecontextid, params);\n                    };\n\n                    Str.get_strings([\n                        {key: 'uploadimage', component: 'format_flexsections'},\n                    ]).done(function(strings) {\n                        var modalPromise = ModalFactory.create({\n                            type: ModalFactory.types.DEFAULT,\n                            title: strings[0],\n                            body: getBody()\n                        });\n\n                        $.when(modalPromise).then(function(fmodal) {\n                            fmodal.setLarge();\n                            return fmodal;\n                        }).done(function(modal) {\n                            modal.show();\n                        }).fail(Notification.exception);\n                    });\n                });\n            },\n\n            singleSection: function() {\n                $(document).on('click', '#uploadsectionimage', (e) => {\n                    let sectionid = $(e.target).data('sectionid');\n                    let coursecontextid = $(e.target).data('contextid');\n\n                    const getBody = function() {\n                        var params = {sectionid: sectionid, type: 'singlesection'};\n                        return Fragment.loadFragment('format_flexsections', 'upload_image', coursecontextid, params);\n                    };\n\n                    Str.get_strings([\n                        {key: 'uploadimage', component: 'format_flexsections'},\n                    ]).done(function(strings) {\n                        var modalPromise = ModalFactory.create({\n                            type: ModalFactory.types.DEFAULT,\n                            title: strings[0],\n                            body: getBody()\n                        });\n\n                        $.when(modalPromise).then(function(fmodal) {\n                            fmodal.setLarge();\n                            return fmodal;\n                        }).done(function(modal) {\n                            modal.show();\n                        }).fail(Notification.exception);\n                    });\n                });\n            },\n\n            multiSections: function() {\n                $('.uploadsectionimage').find('input').each(function() {\n\n                    $(this).on('click', (e) => {\n                        let sectionid = $(e.target).data('sectionid');\n                        let coursecontextid = $(e.target).data('contextid');\n\n                        const getBody = function() {\n                            var params = {sectionid: sectionid, type: 'multisection'};\n                            return Fragment.loadFragment('format_flexsections', 'upload_image', coursecontextid, params);\n                        };\n\n                        Str.get_strings([\n                            {key: 'uploadimage', component: 'format_flexsections'},\n                        ]).done(function(strings) {\n                            var modalPromise = ModalFactory.create({\n                                type: ModalFactory.types.DEFAULT,\n                                title: strings[0],\n                                body: getBody()\n                            });\n\n                            $.when(modalPromise).then(function(fmodal) {\n                                fmodal.setLarge();\n                                return fmodal;\n                            }).done(function(modal) {\n                                modal.show();\n                            }).fail(Notification.exception);\n                        });\n                    });\n                });\n            },\n        };\n    });\n"],"names":["define","$","Ajax","Str","ModalFactory","ModalEvents","Templates","Notification","Fragment","course","document","on","e","courseid","target","data","coursecontextid","get_strings","key","component","done","strings","params","modalPromise","create","type","types","DEFAULT","title","body","loadFragment","when","then","fmodal","setLarge","modal","show","fail","exception","singleSection","sectionid","multiSections","find","each","this"],"mappings":"AAAAA,yCAAO,CAAC,SACA,YACA,WACA,qBACA,oBACA,iBACA,oBACA,kBACJ,SAASC,EAAGC,KAAMC,IAAKC,aAAcC,YAAaC,UAAWC,aAAcC,gBAChE,CACHC,OAAQ,WACJR,EAAES,UAAUC,GAAG,QAAS,sBAAuBC,QACvCC,SAAWZ,EAAEW,EAAEE,QAAQC,KAAK,YAC5BC,gBAAkBf,EAAEW,EAAEE,QAAQC,KAAK,aAOvCZ,IAAIc,YAAY,CACZ,CAACC,IAAK,cAAeC,UAAW,yBACjCC,MAAK,SAASC,aANTC,OAOAC,aAAenB,aAAaoB,OAAO,CACnCC,KAAMrB,aAAasB,MAAMC,QACzBC,MAAOP,QAAQ,GACfQ,MAVAP,OAAS,CAACT,SAAUA,SAAUY,KAAM,UACjCjB,SAASsB,aAAa,sBAAuB,eAAgBd,gBAAiBM,WAYrFrB,EAAE8B,KAAKR,cAAcS,MAAK,SAASC,eAC/BA,OAAOC,WACAD,UACRb,MAAK,SAASe,OACbA,MAAMC,UACPC,KAAK9B,aAAa+B,kBAKjCC,cAAe,WACXtC,EAAES,UAAUC,GAAG,QAAS,uBAAwBC,QACxC4B,UAAYvC,EAAEW,EAAEE,QAAQC,KAAK,aAC7BC,gBAAkBf,EAAEW,EAAEE,QAAQC,KAAK,aAOvCZ,IAAIc,YAAY,CACZ,CAACC,IAAK,cAAeC,UAAW,yBACjCC,MAAK,SAASC,aANTC,OAOAC,aAAenB,aAAaoB,OAAO,CACnCC,KAAMrB,aAAasB,MAAMC,QACzBC,MAAOP,QAAQ,GACfQ,MAVAP,OAAS,CAACkB,UAAWA,UAAWf,KAAM,iBACnCjB,SAASsB,aAAa,sBAAuB,eAAgBd,gBAAiBM,WAYrFrB,EAAE8B,KAAKR,cAAcS,MAAK,SAASC,eAC/BA,OAAOC,WACAD,UACRb,MAAK,SAASe,OACbA,MAAMC,UACPC,KAAK9B,aAAa+B,kBAKjCG,cAAe,WACXxC,EAAE,uBAAuByC,KAAK,SAASC,MAAK,WAExC1C,EAAE2C,MAAMjC,GAAG,SAAUC,QACb4B,UAAYvC,EAAEW,EAAEE,QAAQC,KAAK,aAC7BC,gBAAkBf,EAAEW,EAAEE,QAAQC,KAAK,aAOvCZ,IAAIc,YAAY,CACZ,CAACC,IAAK,cAAeC,UAAW,yBACjCC,MAAK,SAASC,aANTC,OAOAC,aAAenB,aAAaoB,OAAO,CACnCC,KAAMrB,aAAasB,MAAMC,QACzBC,MAAOP,QAAQ,GACfQ,MAVAP,OAAS,CAACkB,UAAWA,UAAWf,KAAM,gBACnCjB,SAASsB,aAAa,sBAAuB,eAAgBd,gBAAiBM,WAYrFrB,EAAE8B,KAAKR,cAAcS,MAAK,SAASC,eAC/BA,OAAOC,WACAD,UACRb,MAAK,SAASe,OACbA,MAAMC,UACPC,KAAK9B,aAAa+B"}